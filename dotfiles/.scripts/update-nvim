#!/usr/bin/env bash

ORIGINAL_DIR=$(pwd)
trap 'cd "$ORIGINAL_DIR"' EXIT

cd ~/source/nixCats
git pull --rebase

nix flake update --flake ~/source/nixCats

nixcats --headless "+Lazy! update" +qa

nix build ~/source/nixCats

# Navigate to the nixCats directory and perform git operations
git add .
git commit -m "nvim auto update [$(date +'%Y-%m-%d %H:%M:%S')]"
git push


git pull --rebase
nix flake update --flake ~/.nix mynvim
cd ~/.nix
git add .
git commit -m "Nvim flake update [$(date +'%Y-%m-%d %H:%M:%S')]"
git push

home-manager switch -b backup --flake ~/.nix
